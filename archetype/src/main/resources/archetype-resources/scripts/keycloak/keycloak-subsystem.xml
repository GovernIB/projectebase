#set( $symbol_pount = '#' )
#set( $symbol_escape = '\' )
#set( $symbol_dollar = '$' )
<subsystem xmlns="urn:jboss:domain:keycloak:1.1">
    <realm name="CAIB">
        <auth-server-url>http://localhost:8180/auth</auth-server-url>
        <ssl-required>EXTERNAL</ssl-required>
    </realm>
    <secure-deployment name="${rootArtifactId}-back-1.0.0.war">
        <realm>CAIB</realm>
        <resource>CAIB-${rootArtifactId}back</resource>
        <use-resource-role-mappings>true</use-resource-role-mappings>
        <public-client>true</public-client>
        <principal-attribute>preferred_username</principal-attribute>
        <verify-token-audience>true</verify-token-audience>
    </secure-deployment>
    <secure-deployment name="${rootArtifactId}-api-1.0.0.war">
        <realm>CAIB</realm>
        <resource>CAIB-${rootArtifactId}api</resource>
        <use-resource-role-mappings>true</use-resource-role-mappings>
        <bearer-only>true</bearer-only>
        <enable-basic-auth>true</enable-basic-auth>
        <principal-attribute>preferred_username</principal-attribute>
        <credential name="secret">4ca19e37-0f86-4f82-9673-9aa11fa7cf0e</credential>
    </secure-deployment>
</subsystem>
