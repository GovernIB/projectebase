<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ca"  lang="ca">
  <head>
    <meta charset="utf-8">
      <script>

  var altPressed = false;
  var mostrarAdvancedOptions = false; 
  function KeyDown(e) {
    var evtobj = window.event? event : e;
    if (evtobj.keyCode == 18) {
       altPressed = true;
    } else {
       if (evtobj.keyCode == 65 && altPressed) {
         var ele = document.getElementById("advancedOptions");
         if (ele.style.display == "block") {
           ele.style.display = "none";
         } else {
           ele.style.display = "block";
         } 
       }
    }
  }
  
  function KeyUp(e) {
    var evtobj = window.event? event : e;
    if (evtobj.keyCode == 18) {
       altPressed = false;
    }
  }

  document.onkeydown = KeyDown;
  
  document.onkeyup = KeyUp;

  function projectnameChange() {

     var projectname = document.getElementById("projectname").value;
     var pbase = document.getElementById("packagebase").value;
     var prefix = document.getElementById("prefix").value;
     var version = document.getElementById("version").value;
     var perfilWS = document.getElementById("generarws").checked;
     var perfilBack = document.getElementById("generarback").checked;
     var perfilBatSh = document.getElementById("generarbatsh").checked;

     var projectnamelowercase = projectname.toLowerCase();
     var projectnameuppercase = projectname.toUpperCase();

     var packageStr = pbase + "." + projectnamelowercase;
     document.getElementById("package").value= packageStr;
     document.getElementById("artifactid").value= projectnamelowercase;
     document.getElementById("groupid").value= packageStr;

     var packagepath = packageStr.replace('.','/');
     while(packagepath.indexOf(".") != -1) {       
       packagepath = packagepath.replace('.','/');
     }

     var inversepackage;
     {
        var arr = packageStr.split(".");
        arr.reverse();
        inversepackage = arr.join(".");
     }

    // org.apache.maven.plugins:maven-archetype-plugin:2.4:generate
    //+ " -DarchetypeRepository=https://governib.github.io/maven/maven"
    var gen = "mvn org.apache.maven.plugins:maven-archetype-plugin:3.1.2:generate"
      + " -B -DarchetypeGroupId=es.caib.projectebase"
      + " -DarchetypeArtifactId=projectebase-archetype -DarchetypeVersion=1.0.0"
      + " -Dpackage=" + packageStr + " -Dpackagepath=" +packagepath 
      + " -Dinversepackage=" + inversepackage 
      + " -DgroupId=" + packageStr + " -DartifactId=" + projectnamelowercase
      + " -Dversion=" + version + " -Dprojectname=" + projectname
      + " -Dprojectnameuppercase=" + projectnameuppercase + " -Dprefix=" + prefix
      + " -Dprefixuppercase=" + prefix.toUpperCase() 
      + " -DperfilWS=" + perfilWS  + " -DperfilBack=" + perfilBack
      + " -DperfilBatSh=" + perfilBatSh;

      document.getElementById("maven").value= gen;
   }

      </script>

    </head>
    <body>
      <h2 style="margin:4px">Generador de Projectes</h2>

      <h3 style="color: #2e6c80; margin:10px;">(1) Requereix tenir instal·lada una versió de openjdk 11.</h3>
      <h3 style="color: #2e6c80; margin:10px;">(2) Requereix tenir instal·lada una versió de maven 3.6 o major.</h3>
      <h3 style="color: #2e6c80; margin:10px;">(3) Introduir les dades del Projecte:</h3>

      <table border="0" cellspacing="0" cellpadding="0">
        <tr style="vertical-align:top">   
          <td width="50%">  
            
            <table border="0">
              <tbody>
                <tr>
                  <td>Nom del Projecte:&nbsp;</td>
                  <td>
                    <input size=35  id="projectname" type="text" value="ProjecteBaseExemple" onkeyup="projectnameChange()" />
                  </td>
                </tr>
                <tr>
                  <td>Package Base</td>
                  <td>
                    <input size=35  id="packagebase" type="text" value="es.caib" onkeyup="projectnameChange()" />
                  </td>
                </tr>
                <tr>
                  <td >Prefix (3 char)</td>
                  <td >
                    <input size=35  id="prefix" type="text" value="pbe" onkeyup="projectnameChange()" />
                  </td>
                </tr>

                <tr>
                  <td>Version</td>
                  <td>
                    <input size=35  id="version" type="text" value="1.0.0" onkeyup="projectnameChange()"  />
                  </td>
                </tr>
                <tr>
                  <td>Generar Back</td>
                  <td>
                    <input size=35  id="generarback" checked="true" type="checkbox" onchange="projectnameChange()" />
                  </td>
                </tr>

                </tbody>

              </table>
              
              <div id="advancedOptions" style="display: none;">
                <table border="0">
                  <tbody>
                  <tr>
                    <td>Generar WS</td>
                    <td>
                      <input id="generarws" value="0" type="checkbox" onchange="projectnameChange()" />
                    </td>
                  </tr>
                  <tr>
                    <td>Generar scripts d'utilitat</td>
                    <td>
                      <input id="generarbatsh" value="0" type="checkbox" onchange="projectnameChange()" />
                    </td>
                  </tr>
                  </tbody>
                </table>
              </div>
              
              
              
           </td>
           <td>
             &nbsp;&nbsp;&nbsp;&nbsp;
           </td>
           <td>

              <h4 style="color: #2e6c80;margin:4px">Dades Generades (només lectura)</h4>
              <table  border="0"  >
                <tbody>
                  <tr>
                    <td >Package</td>
                    <td>
                      <input size=35  id="package" readonly="readonly" type="text" value="es.caib.projectebase" />
                    </td>
                  </tr>
                  <tr>
                    <td >Artifact ID</td>
                    <td >
                      <input size=35  id="artifactid" readonly="readonly" type="text" value="projectebase" />
                    </td>
                  </tr>
                  <tr>
                    <td >Group ID</td>
                    <td>
                      <input size=35  id="groupid" readonly="readonly" type="text" value="es.caib.projectebase" />
                    </td>
                  </tr>

                </tbody>
              </table>

            </td>
          </tr>
        </table>
<!--
<h3 style="color: #2e6c80;margin:10px;">(4) Crear un fitxer [HOME]/.m2/settings.xml (si no existeix) i afegir-li el següent contingut (bloc &lt;profiles&gt; i bloc &lt;activeProfile&gt;):</h3>
              <textarea id="profile" readonly="readonly" style="color:#ff0000;" cols="80" readonly="readonly" rows="17" >
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                          https://maven.apache.org/xsd/settings-1.0.0.xsd">
  <profiles>
    <profile>
      <id>repositorigovernib</id>
      <repositories>
        <repository>
          <id>github-governib-maven</id>
          <name>GitHub GovernIB Maven Repository</name>
          <url>https://governib.github.io/maven/maven/</url>
        </repository>
      </repositories>
    </profile>
  </profiles>
  <activeProfiles>
    <activeProfile>repositorigovernib</activeProfile>
  </activeProfiles>
</settings>
              </textarea>
-->
        <h3 style="color: #2e6c80;margin:10px;">(4) Obrir una consola i executar les següents comandes per generar el projecte:</h3>
        <h4 style="color: #2e6c80;margin:10px;">(4.1) La següent comanda serveix per descarregar l'archetype del repositori maven del GovernIB</h4>
        <b><small>Només cal executar-ho una vegada. L'execució llança un error, però és normal</small><b/><br/>
        
        <textarea id="download" cols="100" readonly="readonly" rows="3">
mvn org.apache.maven.plugins:maven-archetype-plugin:2.4:generate -B -DarchetypeGroupId=es.caib.projectebase -DarchetypeArtifactId=projectebase-archetype -DarchetypeVersion=1.0.0 -DarchetypeRepository=https://governib.github.io/maven/maven 
        </textarea>

        <h4 style="color: #2e6c80;margin:10px;">(4.2) Comanda que genera el projecte</h4>
        <textarea id="maven" cols="100" readonly="readonly" rows="8"> </textarea>
        <br/><br/>
        <i><small>Pitjar Alt+a per opcions avançades</small></i>
        <script>
   projectnameChange();
        </script>

      </body>
    </html>
    
